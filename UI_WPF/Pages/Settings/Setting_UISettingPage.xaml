<Page
    x:Class="Another_Mirai_Native.UI.Pages.Setting_UISettingPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:Another_Mirai_Native.UI.Controls"
    xmlns:converters="clr-namespace:Another_Mirai_Native.UI.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Another_Mirai_Native.UI.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.modernwpf.com/2019"
    Title="Setting_UISettingPage"
    d:DataContext="{d:DesignInstance Type=local:Setting_UISettingPage}"
    d:DesignWidth="800"
    Loaded="Page_Loaded"
    mc:Ignorable="d">
    <Page.Resources>
        <converters:EnumToItemsSourceConverter x:Key="EnumToItemsSourceConverter" />
        <converters:EnumDescriptionConverter x:Key="EnumDescriptionConverter" />
    </Page.Resources>
    <ui:SimpleStackPanel Margin="10,0,20,0" Spacing="10">
        <StackPanel>
            <!--  启动设置  -->
            <Border
                Margin="0,0,0,10"
                Padding="10"
                Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                BorderBrush="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                BorderThickness="1"
                CornerRadius="8">
                <ui:SimpleStackPanel Spacing="10">
                    <TextBlock
                        Margin="0,0,0,5"
                        FontSize="16"
                        FontWeight="SemiBold"
                        Style="{StaticResource TitleTextBlockStyle}">
                        🚀 启动设置
                    </TextBlock>
                    <controls:SettingItem_ToggleButton
                        x:Name="AutoStartup"
                        Title="开机自动启动"
                        OnToggled="SettingItem_Toggled"
                        Subtitle="系统启动时自动运行程序" />

                    <controls:SettingItem_ToggleButton
                        x:Name="AutoCloseWindow"
                        Title="连接成功后自动关闭窗口"
                        OnToggled="SettingItem_Toggled"
                        Subtitle="协议连接成功后最小化主窗口" />

                    <controls:SettingItem_ToggleButton
                        x:Name="WebUIAutoStart"
                        Title="自动启动 WebUI"
                        OnToggled="SettingItem_Toggled" />
                </ui:SimpleStackPanel>
            </Border>

            <!--  日志设置  -->
            <Border
                Margin="0,0,0,10"
                Padding="10"
                Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                BorderBrush="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                BorderThickness="1"
                CornerRadius="8">
                <ui:SimpleStackPanel Spacing="10">
                    <TextBlock
                        Margin="0,0,0,15"
                        FontSize="16"
                        FontWeight="SemiBold"
                        Style="{StaticResource TitleTextBlockStyle}">
                        📝 日志设置
                    </TextBlock>
                    <controls:SettingItem_TextBox
                        x:Name="LogItemsCount"
                        Title="日志最大数量"
                        Data="1"
                        DataChanged="SettingItem_TextBox_DataChanged"
                        Subtitle="内存中保存的日志条目数量限制"
                        Unit="条" />
                    <controls:SettingItem_ToggleButton
                        x:Name="LogAutoScroll"
                        Title="日志自动滚动"
                        OnToggled="SettingItem_Toggled"
                        Subtitle="新日志自动滚动到最新位置" />
                    <controls:SettingItem_ToggleButton
                        x:Name="ShowBalloonTip"
                        Title="错误等级日志弹出通知"
                        OnToggled="SettingItem_Toggled"
                        Subtitle="错误级别的日志显示系统通知" />
                </ui:SimpleStackPanel>
            </Border>

            <!--  插件设置  -->
            <Border
                Margin="0,0,0,10"
                Padding="10"
                Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                BorderBrush="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                BorderThickness="1"
                CornerRadius="8">
                <ui:SimpleStackPanel Spacing="10">
                    <TextBlock
                        Margin="0,0,0,5"
                        FontSize="16"
                        FontWeight="SemiBold"
                        Style="{StaticResource TitleTextBlockStyle}">
                        🔌 插件设置
                    </TextBlock>
                    <controls:SettingItem_ToggleButton
                        x:Name="ShowWhenError"
                        Title="插件崩溃时主窗口自动弹出"
                        OnToggled="SettingItem_Toggled"
                        Subtitle="插件发生错误时自动显示主窗口" />
                </ui:SimpleStackPanel>
            </Border>

            <!--  外观设置  -->
            <Border
                Margin="0,0,0,10"
                Padding="10"
                Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                BorderBrush="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                BorderThickness="1"
                CornerRadius="8">
                <ui:SimpleStackPanel Spacing="10">
                    <TextBlock
                        Margin="0,0,0,5"
                        FontSize="16"
                        FontWeight="SemiBold"
                        Style="{StaticResource TitleTextBlockStyle}">
                        🎨 外观设置
                    </TextBlock>

                    <controls:SettingItem_ComboBox
                        x:Name="Theme"
                        Title="主题"
                        ItemSources="{Binding ThemeValues, Converter={StaticResource EnumToItemsSourceConverter}}"
                        SelectedItemChanged="ThemeSelector_SelectedItemChanged"
                        Subtitle="选择应用程序的主题模式" />

                    <controls:SettingItem_ToggleButton
                        x:Name="HardwareRender"
                        Title="启动硬件渲染加速"
                        OnToggled="SettingItem_Toggled"
                        Subtitle="关闭时可以降低内存占用" />

                    <controls:SettingItem_ComboBox
                        x:Name="WindowMaterial"
                        Title="窗口材质（Windows11以上可用）"
                        ItemSources="{Binding MaterialValues, Converter={StaticResource EnumToItemsSourceConverter}}"
                        SelectedItemChanged="ThemeSelector_SelectedItemChanged"
                        Subtitle="选择窗口的背景材质效果" />

                    <TextBlock FontWeight="Medium" Style="{StaticResource BaseTextBlockStyle}">主题颜色</TextBlock>
                    <controls:AccentColorPicker Grid.Column="1" />
                </ui:SimpleStackPanel>
            </Border>
        </StackPanel>
    </ui:SimpleStackPanel>
</Page>